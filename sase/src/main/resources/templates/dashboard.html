<!-- <!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout}">

<head>
    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />


    <title>Sad Security</title>
    <script>
        document.addEventListener("DOMContentLoaded", function () {

            const start = document.getElementById("start-room");
            const stop = document.getElementById("stop-room");
            const areaRisposta = document.getElementById("areaRisposta");
            const utente = document.getElementById("user").textContent;

            //ottenere il token generato dalla applicazione
            const token = document.querySelector('meta[name="_csrf"]').getAttribute("content");
            const header = document.querySelector('meta[name="_csrf_header"]').getAttribute("content");


            // Richiesta di avvio di un laboratorio
            start.addEventListener("click", function () {

                areaRisposta.textContent = 'Avvio in corso....'
                // Esempio di richiesta GET semplice
                fetch('/room/start', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        [header]: token
                    },
                    body: JSON.stringify({
                        'nomeClass': 'TestClass',
                        'nomeLab': 'BufferOverflow',
                        'utente': utente
                    })

                })
                    .then(response => response.text()) // Parsa la risposta come JSON
                    .then(data => {
                        areaRisposta.textContent = 'Dati ricevuti: ' + data;
                    })
                    .catch(error => {
                        console.error('Errore durante la richiesta:', error);
                        areaRisposta.textContent = 'Errore durante l\'invio della richiesta.';
                    });
            })

            // Richiesta di chiusura del laboratorio
            stop.addEventListener("click", function () {

                areaRisposta.textContent = 'Stop container in corso....'
                // Esempio di richiesta GET semplice
                fetch('/room/stop', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        [header]: token
                    },
                    body: JSON.stringify({
                        'utente': utente
                    })

                })
                    .then(response => response.text()) // Parsa la risposta come JSON
                    .then(data => {
                        areaRisposta.textContent = 'Dati ricevuti: ' + data;
                    })
                    .catch(error => {
                        console.error('Errore durante la richiesta:', error);
                        areaRisposta.textContent = 'Errore durante l\'invio della richiesta.';
                    });


            })
        })
    </script>
</head>
-->


<!-- 
    <div layout:fragment="content">
        <h1>Dashboard</h1>
        <button id="start-room">Avvia laboratorio</button>
        <button id="stop-room">Stop laboratorio</button>
        <div id="areaRisposta"></div> 
    </div>

    <div>
        CONTENUTO DELLA ROOM
    </div>


</html> 
  -->
<!-- QUELLO CHE STA SOPRA DEVE ESSERE INSERITO NEL FILE JS ALL'INTERNO DI APPOSITE FUNZIONI CHE SI OCCUPANDO DI AVVIARE E FERMARE LE ROOM -->

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layoutDashboard}">

<head>
    <title>Sad Security - Studente</title>
    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />
</head>

<body>

    <main layout:fragment="content" class="home-layout">


        <div class="sidebar">
            <h2>Classi a cui sei iscritto</h2>
            <ul id="student-sidebar-options">


                <!-- Qui verranno aggiunte dinamicamente nuove voci -->
                <li th:each="classe : ${classiUtente}" th:if="${classiUtente != null}">
                    <a href="#" class="sidebar-item" th:data-option="${classe.nome}" th:text="${classe.nome}"></a>
                </li>
            </ul>

            <h2>Operazioni</h2>
            <ul>
                <li><a href="#" class="sidebar-item" data-option="Risultati">Risultati Room</a></li>
            </ul>

            <div class="sidebar-settings">
                <h3>Impostazioni</h3>
                <button class="sidebar-item" data-option="IscrivitiClasse">Iscriviti a una Classe</button>
                <button class="sidebar-item" data-option="Cambia Password">Cambia Password</button>
                <button class="sidebar-item" data-option="Logout">Logout</button>
            </div>
        </div>

        <div class="content-display">
            <h1 id="Section-title">Benvenuto Studente</h1>
            <div id="section-description">
                <p>Seleziona un'opzione dalla barra laterale per iniziare.</p>
            </div>
        </div>
    </main>

    <th:block layout:fragment="scripts">
        <script th:src="@{/js/dashboardStudente.js}"></script>
    </th:block>
</body>

</html>